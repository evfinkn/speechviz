# Speech Visualization

This will take an audio file and visualize various characteristics. Currently, you can see when speakers speak in the file and when there is voice activity (and conversely no voice activity). Additionally, you can play any given segment of speech by a given speaker by pressing the play button. If you press the loop button right next to it, the segment will play on repeat.

## Installation

```
git clone https://research-git.uiowa.edu/uiowa-audiology-reu-2022/speechviz.git
cd speechviz
npm install
python db_init.py
```
To use process_audio and the pipeline, you'll need to first make a conda environment:
```
conda create -n ENVNAME
conda activate ENVNAME
conda install pytorch numpy torchvision torchaudio cudatoolkit=11.3 -c pytorch
```
Then, install [pyannotate.audio](https://github.com/pyannote/pyannote-audio) and speechbrain with pip:
```
pip install https://github.com/pyannote/pyannote-audio/archive/develop.zip
pip install speechbrain
```
You also need to install [audiowaveform](https://github.com/bbc/audiowaveform#installation) and [ffmpeg](https://ffmpeg.org/download.html).

pip install

## Usage
Before running the server, you'll need to process some audio. To do so, run:
```
python process_audio.py FILE
```
For more information, run:
```
python process_audio.py -h
```

To start the server, run:
```
npm start
```
and then open http://localhost:3000 in your browser.

By default, the server listens on port 3000. To specify a different port, run with the port option:
```
npm start -- --port=PORT
```
where PORT is the port you want the server to listen on.

To actually display any audio, you need to:
1. Add the audio file to the `data/audio` directory.
2. Add the json file for the waveform (generated by the pipeline) to the `data/waveforms` directory.
3. Add the json file for the segments (generated by the pipeline) to the `data/segments` directory.

For example, for the file `example.mp3`, there should be `data/audio/example.mp3`, `data/waveforms/example-waveform.json`, and `data/segments/example-segments.json`.
